<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <meta name="theme-color" content="#101318" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>TerrainCreator</title>

  <link rel="manifest" href="./manifest.webmanifest">
  <link rel="apple-touch-icon" href="./assets/icons/icon-512.png">
  <link rel="stylesheet" href="./styles/app.css">

  <script type="importmap">
  {
    "imports": {
      "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
      "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
    }
  }
  </script>

  <script type="module" src="./bootstrap.js"></script>
</head>
<body>
  <!-- NEW WRAPPER: scene on the left (desktop) / top (mobile), panel alongside -->
  <div id="app">
    <div id="sceneHost" aria-label="Scene area">
      <canvas id="c"></canvas>
    </div>

    <div id="panel" class="card" aria-label="Control panel">
      <div class="tabs">
        <button class="tab on" data-tab="terrain">Terrain</button>
        <button class="tab" data-tab="sculpt">Sculpt</button>
        <button class="tab" data-tab="objects">Objects</button>
        <button class="tab" data-tab="extras">Extras</button>
        <button class="tab" data-tab="settings">Settings</button>
      </div>

      <div class="tabcontent on" id="tab-terrain">
        <div class="section">
          <div class="row row-split">
            <label>Grid (tiles)</label>
            <div class="input-pair">
              <input id="tilesX" type="number" min="2" max="256" step="1" value="30" inputmode="numeric">
              <span class="times">x</span>
              <input id="tilesY" type="number" min="2" max="256" step="1" value="30" inputmode="numeric">
            </div>
          </div>

          <div class="grid">
            <button id="genTerrain" class="primary">Generate</button>
            <button id="randomize">Random jitter</button>
          </div>

          <div class="row row-split">
            <label>Grid outlines</label>
            <button id="toggleGrid">Grid: On</button>
          </div>
        </div>

        <div class="section">
          <div class="row row-split">
            <label for="template">Heightmap template</label>
            <select id="template">
              <option value="Flat">Flat</option>
              <option value="DiamondSquare">DiamondSquare</option>
              <option value="Perlin" selected>Perlin</option>
              <option value="Simplex">Simplex</option>
              <option value="Fault">Fault</option>
              <option value="Cosine">Cosine</option>
              <option value="Value">Value</option>
              <option value="Worley">Worley</option>
            </select>
            <button id="applyTemplate">Apply</button>
          </div>

          <div class="row row-split">
            <label>Trees</label>
            <div class="input-pair">
              <input id="treeCount" type="number" min="0" max="100000" step="1" value="200" inputmode="numeric">
              <button id="applyTrees">Populate</button>
            </div>
          </div>
        </div>
      </div>

      <div class="tabcontent" id="tab-sculpt">
        <div class="section">
          <div class="row">
            <label for="sculptOn">Enable sculpt</label>
            <label class="switch">
              <input id="sculptOn" type="checkbox">
              <span class="slider"></span>
            </label>
          </div>

          <div class="row row-split">
            <label>Height step</label>
            <div class="spinner">
              <button id="stepDown" aria-label="step down">-</button>
              <input id="stepInput" type="number" step="0.2" min="-2" max="2" value="0.2" inputmode="decimal">
              <button id="stepUp" aria-label="step up">+</button>
            </div>
          </div>

          <div class="row row-split">
            <label>Radius (tiles)</label>
            <div class="spinner">
              <button id="radiusDown" aria-label="radius down">-</button>
              <input id="radiusInput" type="number" step="1" min="1" max="6" value="2" inputmode="numeric">
              <button id="radiusUp" aria-label="radius up">+</button>
            </div>
          </div>

          <div class="grid">
            <button id="modeRaise" class="toggle on">Raise</button>
            <button id="modeLower" class="toggle">Lower</button>
            <button id="modeSmooth" class="toggle">Smooth</button>
          </div>
          <p class="hint">When sculpting is ON, the camera is frozen.</p>
        </div>
      </div>

      <div class="tabcontent" id="tab-objects"><div class="section muted">Objects tab coming soon.</div></div>
      <div class="tabcontent" id="tab-extras"><div class="section muted">Extras tab coming soon.</div></div>

      <div class="tabcontent" id="tab-settings">
        <div class="section">
          <button id="installBtn" class="primary">Install App</button>
        </div>
        <div class="section muted">Settings tab coming soon.</div>
      </div>
    </div>
  </div>
</body>
</html>
