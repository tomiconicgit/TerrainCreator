:root{
  /* Requested palette */
  --panel-bg:#1c1c1c;            /* panel + tabs background */
  --input-bg:#1c1c1b;            /* text boxes / selects (darker than panel) */
  --btn-bg:#4d4c4c;              /* buttons */
  --btn-bg-hover:#5a5959;
  --btn-fg:#f4f4f4;              /* off-white text */
  --fg:#f4f4f4;                  /* main text */
  --muted:#b8bec6;               /* labels */
  --line:#2a2a2a;

  --page-bg:#101215;
  --scene-bg:#15181c;

  --h-ctrl:34px;
  --pad-ctrl:8px 10px;
  --font:14px;
  --font-small:12px;

  --safe-top:env(safe-area-inset-top);
  --safe-bottom:env(safe-area-inset-bottom);
  --safe-left:env(safe-area-inset-left);
  --safe-right:env(safe-area-inset-right);
}

/* Mobile: friendlier tap targets */
@media (hover:none) and (pointer:coarse){
  :root{
    --h-ctrl:44px;
    --pad-ctrl:10px 12px;
    --font:16px;
    --font-small:13px;
  }
}

*{ box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
html,body{
  height:100%; margin:0;
  background:var(--page-bg); color:var(--fg);
  font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
}

/* ===== LAYOUT ============================================================ */
#app{
  height:100svh;
  display:grid;
  grid-template-areas:"scene" "panel";
  grid-template-rows: 56svh 1fr;  /* mobile: scene on top */
  grid-template-columns: 1fr;
  gap:0;
  padding-left:max(8px,var(--safe-left));
  padding-right:max(8px,var(--safe-right));
}

/* Desktop: side-by-side, stable panel width */
@media (min-width:900px){
  #app{
    padding:0;
    grid-template-areas:"scene panel";
    grid-template-rows: 100svh;
    grid-template-columns: minmax(560px,1fr) 420px; /* adjust to taste */
  }
}

/* ===== SCENE ============================================================= */
#sceneHost{ grid-area:scene; position:relative; height:100%; overflow:hidden; background:var(--scene-bg); }
#c{ position:absolute; inset:0; width:100%; height:100%; display:block; outline:none; touch-action:none; z-index:0; }

/* ===== PANEL ============================================================= */
#panel.card{
  grid-area:panel;
  position:relative;
  z-index:10;
  background:var(--panel-bg);
  border:none;          /* no thin border line */
  border-radius:0;      /* crisp, flush on desktop */
  box-shadow:none;
  overflow:hidden;
  display:flex; flex-direction:column;
}
@media (max-width:899.98px){
  #panel.card{ margin-top:8px; border-radius:8px; }
}

/* ===== TABS ============================================================== */
#panel .tabs{
  height:42px; display:grid; grid-template-columns:repeat(5,1fr);
  background:var(--panel-bg);
  border-bottom:1px solid var(--line);
}
#panel .tab{
  min-height:42px; padding:0 8px; background:transparent; border:0;
  color:var(--muted); font-weight:700; font-size:var(--font);
  position:relative; cursor:pointer; min-width:0; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
}
#panel .tab:hover{ color:#ffffff; }
#panel .tab.on{ color:#ffffff; }
#panel .tab.on::after{
  content:""; position:absolute; left:8px; right:8px; bottom:0;
  height:2px; background:#ffffff; opacity:.85; border-radius:1px;
}

/* ===== CONTENT =========================================================== */
#panel .tabcontent{
  display:none;
  flex:1 1 auto;
  overflow-y:auto; overflow-x:hidden;  /* prevent horizontal sliding */
  padding:10px 12px;
  contain: content;
}
#panel .tabcontent.on{ display:block; }

.section{ margin-bottom:10px; }
.section.muted{ color:var(--muted); }

/* ===== FORM ROWS ========================================================= */
.form-row{
  display:flex; flex-wrap:wrap; align-items:center; gap:8px;
  margin:8px 0;
}
.form-row > *{ flex:0 1 auto; min-width:0; }

.input-pair{ display:flex; align-items:center; gap:8px; }
.input-pair input[type="number"]{ width:92px; }
.times{ color:var(--muted); padding:0 2px; }

label{ color:var(--muted); font-size:var(--font); white-space:nowrap; }
.spacer-label{ margin-left:12px; }

/* Desktop keeps things in one line more often */
@media (min-width:900px){
  .form-row label{ flex:0 0 auto; }
  .form-row .input-pair{ flex:0 1 210px; }
  .form-row select{ flex:1 1 190px; }
  .form-row button{ flex:0 0 auto; }
}

/* Mobile stacks cleanly */
@media (max-width:899.98px){
  .form-row label{ flex:1 0 100%; }
  .form-row .switch{ margin-bottom:6px; }
  .form-row .input-pair{ flex:1 0 100%; }
  .form-row select{ flex:1 0 100%; }
  .form-row button{ flex:1 0 100%; }
}

/* ===== CONTROLS ========================================================== */
button, .pill, input[type="number"], input[type="text"], input[type="decimal"], select{
  height:var(--h-ctrl); padding:var(--pad-ctrl);
  border-radius:4px; border:1px solid transparent; font-size:var(--font); outline:none; min-width:0;
}

input[type="number"], input[type="text"], input[type="decimal"], select{
  background:var(--input-bg); color:var(--fg);
}
input::placeholder{ color:var(--muted); opacity:.6; }

select{
  appearance:none;
  background-image:
    linear-gradient(45deg, transparent 50%, var(--fg) 50%),
    linear-gradient(135deg, var(--fg) 50%, transparent 50%);
  background-position:
    calc(100% - 18px) 50%,
    calc(100% - 12px) 50%;
  background-size:6px 6px, 6px 6px;
  background-repeat:no-repeat;
  padding-right:28px;
}

/* Buttons */
button{
  background:var(--btn-bg); color:var(--btn-fg);
  font-weight:700; cursor:pointer;
}
button:hover{ background:var(--btn-bg-hover); }
button:active{ filter:brightness(.98); }
button.primary{ background:var(--btn-bg); color:var(--btn-fg); }
button.toggle.on{ box-shadow: inset 0 0 0 2px #00000022; }

/* Spinner */
.spinner{ display:flex; align-items:center; gap:8px; }
.spinner input{ width:96px; text-align:center; }
.spinner button{ width:var(--h-ctrl); min-width:var(--h-ctrl); padding:0; }

/* Switch (Sculpt + Grid outlines + NavLock) */
.switch{ position:relative; display:inline-block; width:52px; height:26px; }
.switch input{ display:none; }
.slider{
  position:absolute; inset:0; border-radius:999px;
  background:#2e2e2e; transition:.18s; border:1px solid #0000;
}
.slider:before{
  content:""; position:absolute; width:20px; height:20px; left:3px; top:3px;
  background:#fff; border-radius:50%; transition:.18s; box-shadow:0 1px 2px rgba(0,0,0,.35);
}
.switch input:checked + .slider{ background:#444; }
.switch input:checked + .slider:before{ transform:translateX(26px); }

@media (hover:none) and (pointer:coarse){
  .switch{ width:60px; height:30px; }
  .slider:before{ width:24px; height:24px; }
  .switch input:checked + .slider:before{ transform:translateX(30px); }
}

/* Hints */
.hint{ margin:6px 2px 0; color:var(--muted); font-size:var(--font-small); }

/* Focus */
button:focus-visible, input:focus-visible, select:focus-visible{
  outline:2px solid #ffffff; outline-offset:1px;
}

/* Scrollbars (WebKit) */
#panel .tabcontent::-webkit-scrollbar{ width:10px; }
#panel .tabcontent::-webkit-scrollbar-thumb{
  background:#2c333b; border-radius:6px; border:2px solid transparent; background-clip:padding-box;
}
#panel .tabcontent::-webkit-scrollbar-track{ background:#1b1f24; }
